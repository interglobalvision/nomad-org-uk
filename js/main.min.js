function lazyLoadImages(e){var i=largeImageThreshold/2;$(e).each(function(){var e=$(this),t=e.data();retina?(windowWidth>largerImageThreshold&&e.attr("src",t.largest),i>windowWidth?e.attr("src",t.basic):e.attr("src",t.large)):windowWidth>largestImageThreshold?e.attr("src",t.largest):windowWidth>largerImageThreshold?e.attr("src",t.larger):windowWidth>largeImageThreshold?e.attr("src",t.large):e.attr("src",t.basic),e.imagesLoaded(function(){this.images[0].img.className+=" img-loaded",$(".js-packery-container").length&&$(".js-packery-container").packery()})})}function singleLayout(){$("#single-slider").css({"padding-top":margin,height:windowHeight-captionHeight})}var retina=Modernizr.highresdisplay,largeImageThreshold=1100,largerImageThreshold=1600,largestImageThreshold=2e3,margin=35,slideMargin=80,basicAnimationSpeed=700,html=$("html"),mainContent=$("#main-content"),windowHeight=$(window).outerHeight(),windowWidth=$(window).width(),captionHeight=$("#single-slider-text").outerHeight(),footerHeight=$("#footer").outerHeight(!0),headerHeight=$("#header").outerHeight(!0),footerOffset=footerHeight+headerHeight+margin,galleryOverlay=$("#gallery-overlay"),videoOverlay=$("#video-overlay"),slickItemWidth,slickItemPadding,videoWidth,videoHeight,videoPadding,videoAreaHeight,videoAreaWidth;$(window).resize(function(){windowHeight=$(window).outerHeight(),windowWidth=$(window).width()}),$("body").hasClass("single")&&singleLayout();var Slick={init:function(){var e=this;$(".js-slick-container").on({init:function(i,t){e.replaceCaptions(0),e.resizeImages(),$("#single-slider").css("opacity",1)},afterChange:function(i,t,o){e.replaceCaptions(o)}}).slick({prevArrow:$("#gallery-overlay-previous"),nextArrow:$("#gallery-overlay-next")}),$(".js-slick-item").on("click",function(){$(".js-slick-container").slick("slickNext")})},replaceCaptions:function(e){var i,t=$('[data-slick-index="'+e+'"]').data();(void 0!==t.caption||null!==t.caption)&&(i=t.caption);var o=t.title;$("#gallery-overlay-caption").html(i&&void 0!==i&&null!==i?", "+i:" "),$("#gallery-overlay-title").html(o&&void 0!==o&&null!==o?o:" ")},resizeImages:function(){slickItemWidth=$("#gallery-overlay .js-slick-item:first-of-type").width(),slickItemPadding=$("#gallery-overlay .js-slick-item:first-of-type").css("padding"),$(".js-slick-item img").css({"max-height":windowHeight-captionHeight-2*slideMargin,"max-width":slickItemWidth-2*slickItemPadding})}};jQuery(document).ready(function(){"use strict";$("#scroll-to-menu").on("click",function(){$("html").ScrollTo()}),mainContent.css("min-height",windowHeight-footerOffset),$("#footer").css("opacity",1),$(window).resize(function(){mainContent.css("min-height",windowHeight-footerOffset)}),$(".js-post-toggle").on("click",function(){var e=$(this),i=e.parent().find(".post-copy");e.data("open")===!0?(i.slideUp(basicAnimationSpeed),e.data("open",!1)):(i.slideDown(basicAnimationSpeed),e.data("open",!0))}),$(".project-video").each(function(){this.load()}),$(".project-video").on("durationchange",function(){$(this).is(":hover")&&this.play(),$(this).on({mouseenter:function(){this.play()},mouseleave:function(){this.pause(),this.currentTime=0}})}),$("body").hasClass("single-project")&&(mainContent.ScrollTo(),lazyLoadImages(".js-grid-img")),$(".js-load-gallery").on("click",function(){var e="#overlay-gallery-"+$(this).data("gallery"),i=$(e).find(".js-slick-item");i.clone().appendTo("#gallery-overlay-insert"),lazyLoadImages("#gallery-overlay-insert .slider-img"),galleryOverlay.show(),html.addClass("overlay-active"),Slick.init(),mainContent.ScrollTo()}),$("#gallery-overlay-close").on("click",function(){galleryOverlay.hide(),html.removeClass("overlay-active"),$(".js-slick-container").slick("unslick").html("")});var e=function(){videoPadding=parseInt($(".js-video-holder").css("padding-top")),videoAreaHeight=windowHeight-2*videoPadding,videoAreaWidth=windowWidth-2*videoPadding,videoHeight=.5625*videoAreaWidth,videoWidth=1.7777*videoAreaHeight,videoHeight>videoAreaHeight&&(videoHeight=videoAreaHeight,videoWidth=1.7777*videoAreaHeight),videoWidth>videoAreaWidth&&(videoWidth=videoAreaWidth,videoHeight=.5625*videoAreaWidth),$("#overlay-video-player").css({height:videoHeight,width:videoWidth})};$(".js-load-vimeo").on("click",function(){var i=$(this),t=i.data(),o='<iframe id="overlay-video-player" src="//player.vimeo.com/video/'+t.vimeo+'?portrait=0&badge=0&byline=0&title=0&autoplay=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';$("#video-overlay-insert").html(o),$("#video-overlay-title").html(t.title),videoOverlay.show(),html.addClass("overlay-active"),e(),mainContent.ScrollTo()}),$("#video-overlay-close").on("click",function(){videoOverlay.hide(),html.removeClass("overlay-active"),$("#video-overlay-insert").html("")});var i=$("#project-header"),t=$("#scroll-to-menu");if(i.length){var o=i.offset(),a=o.top,r=i.outerHeight();$("article.project").prepend('<div class="js-header-spacer u-hidden"></div>');var l=$(".js-header-spacer");l.css("height",r),$(window).on("scroll",function(){var e=$(window).scrollTop();i.hasClass("u-fixed")?a>=e&&(i.removeClass("u-fixed"),l.addClass("u-hidden"),t.addClass("u-hidden")):e>=a&&(i.addClass("u-fixed"),l.removeClass("u-hidden"),t.removeClass("u-hidden"))})}else{var n=100;$(window).on("scroll",function(){var e=$(window).scrollTop();t.hasClass("u-hidden")?e>=n&&t.removeClass("u-hidden"):n>=e&&t.addClass("u-hidden")})}$(".js-project-copy-link").on("click",function(){var e="#"+$(this).data("target-id");$(e).ScrollTo()}),$(".js-packery-container").length&&$(".js-packery-container").packery({itemSelector:".js-packery-item",transitionDuration:"0s",percentPosition:!0,isOriginTop:!1}),$(window).bind("resize",function(){var i;$(window).resize(function(){clearTimeout(i),i=setTimeout(function(){Slick.resizeImages(),e()},250)})})});
//# sourceMappingURL=/main.min.js.map