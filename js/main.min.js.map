{"version":3,"sources":["main.js"],"names":["l","data","console","log","lazyLoadImages","selector","windowWidth","$","window","width","each","$this","this","retina","largeImageThreshold","attr","largest","large","largestImageThreshold","basic","slickLazyLoad","singleLayout","css","padding-top","margin","height","windowHeight","captionHeight","debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","Modernizr","highresdisplay","slideMargin","basicAnimationSpeed","html","outerHeight","galleryOverlay","videoOverlay","resize","hasClass","Slick","init","_this","on","event","slick","replaceCaptions","resizeImages","afterChange","currentSlide","nextSlide","prevArrow","nextArrow","caption","title","undefined","jQuery","document","ready","ScrollTo","$copy","parent","find","slideUp","slideDown","load","is","play","mouseenter","mouseleave","pause","currentTime","target","insert","clone","appendTo","show","addClass","hide","removeClass","vimeo","$projectHeader","$toMenu","length","projectHeaderOffset","offset","projectHeaderTop","top","projectHeaderHeight","prepend","$headerSpacer","scrollTop","showToMenu","imagesLoaded","packery","itemSelector","transitionDuration","percentPosition","isOriginTop","opacity"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Modernizr */\n\nfunction l(data) {\n  'use strict';\n  console.log(data);\n}\n\n// VARS\n\nvar retina = Modernizr.highresdisplay,\n  largeImageThreshold = 800,\n  largestImageThreshold = 1400,\n\n  margin = 35,\n  slideMargin = 80,\n\n  basicAnimationSpeed = 700,\n\n  html = $('html'),\n\n  windowHeight = $(window).outerHeight(),\n  windowWidth = $(window).width(),\n\n  captionHeight = $('#single-slider-text').outerHeight(),\n\n  galleryOverlay = $('#gallery-overlay'),\n  videoOverlay = $('#video-overlay');\n\n// FUNCTIONS\n\n  // LAZY IMAGES\n\nfunction lazyLoadImages(selector) {\n  windowWidth = $(window).width();\n\n  $(selector).each(function() {\n    var $this = $(this);\n    var data = $this.data();\n\n    if (retina) {\n      if (windowWidth > (largeImageThreshold * 1.5)) {\n        $this.attr('src', data.largest);\n      } else {\n        $this.attr('src', data.large);\n      }\n    } else if (windowWidth > largestImageThreshold) {\n      $this.attr('src', data.largest);\n    } else if (windowWidth > largeImageThreshold) {\n      $this.attr('src', data.large);\n    } else {\n      $this.attr('src', data.basic);\n    }\n  });\n}\n\n// what does this function do?!\n\nfunction slickLazyLoad(selector) {\n  windowWidth = $(window).width();\n\n  $(selector).each(function() {\n    var $this = $(this);\n    var data = $this.data();\n\n    if (retina) {\n      if (windowWidth > (largeImageThreshold * 1.5)) {\n        $this.attr('data-lazy', data.largest);\n      } else {\n        $this.attr('data-lazy', data.large);\n      }\n    } else if (windowWidth > largestImageThreshold) {\n      $this.attr('data-lazy', data.largest);\n    } else if (windowWidth > largeImageThreshold) {\n      $this.attr('data-lazy', data.large);\n    } else {\n      $this.attr('data-lazy', data.basic);\n    }\n  });\n}\n\n  // LAYOUT\n\n$(window).resize(function() {\n  windowHeight = $(window).outerHeight();\n});\n\nfunction singleLayout() {\n  $('#single-slider').css({\n    'padding-top': margin,\n    'height': (windowHeight - captionHeight)\n  });\n}\n\nif ($('body').hasClass('single')) {\n  singleLayout();\n}\n\n  // RESIZE\n\nfunction debounce(func, wait, immediate) {\n  var timeout;\n  return function() {\n    var context = this, args = arguments;\n    var later = function() {\n      timeout = null;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n}\n\n  // SLICK\n\nvar Slick = {\n  init: function() {\n    var _this = this;\n    $('.js-slick-container').on({\n      init: function(event, slick){\n        //var currentSlideIndex = $('.slick-active').attr('data-slick-index');\n        // set caption\n        _this.replaceCaptions(0);\n\n        // set length for n of * in captions\n        //$('#slick-length').html($('.js-slick-item').length-2);\n\n        // fix images for window height\n        _this.resizeImages();\n\n        // fade in when ready\n        $('#single-slider').css( 'opacity' , 1 );\n        //$('#single-slider-text').css( 'opacity' , 1 );\n      },\n      afterChange: function(event, slick, currentSlide, nextSlide){\n        // set caption\n        _this.replaceCaptions(currentSlide);\n\n        // set active index in human readable form\n        //$('#slick-current-index').html(currentSlide+1);\n      }\n    }).slick({\n      prevArrow: $('#gallery-overlay-previous'),\n      nextArrow: $('#gallery-overlay-next'),\n    });\n\n    $('.js-slick-item').on('click', function() {\n      $('.js-slick-container').slick('slickNext');\n    });\n  },\n\n  replaceCaptions: function(currentSlide) {\n    var data = $('[data-slick-index=\"' + currentSlide + '\"]').data();\n    var caption = data.caption;\n    var title = data.title;\n\n    if (! caption || caption === undefined || caption === null) {\n      $('#gallery-overlay-caption').html(' ');\n    } else {\n      $('#gallery-overlay-caption').html(', ' + caption);\n    }\n\n    if (! title || title === undefined || title === null) {\n      $('#gallery-overlay-title').html(' ');\n    } else {\n      $('#gallery-overlay-title').html(title);\n    }\n\n  },\n\n  resizeImages: function() {\n    $('.js-slick-item img').css( 'max-height' , ( windowHeight - captionHeight - (slideMargin * 2) ) );\n  }\n};\n\n\njQuery(document).ready(function () {\n  'use strict';\n\n// MENU\n\n  $('#scroll-to-menu').on('click', function() {\n    $('html').ScrollTo();\n  });\n\n// INDEX\n  $('.js-post-toggle').on('click', function() {\n    var $this = $(this);\n    var $copy = $this.parent().find('.post-copy');\n\n    if ($this.data('open') === true) {\n      $copy.slideUp(basicAnimationSpeed);\n      $this.data('open', false);\n    } else {\n      $copy.slideDown(basicAnimationSpeed);\n      $this.data('open', true);\n    }\n  });\n\n  // VIDEO HOVERS\n\n  $('.project-video').each( function() {\n    console.log('loading');\n    this.load();\n  });\n\n  $('.project-video').on('durationchange', function() {\n    console.log('loaded');\n    if( $(this).is(\":hover\") ) {\n      this.play();\n    }\n    $(this).on({\n      'mouseenter': function() {\n        this.play();\n      },\n      'mouseleave': function() {\n        this.pause();\n        this.currentTime = 0;\n      },\n    });\n  });\n\n\n// SINGLE PROJECT\n\n  if ($('body').hasClass('single-project')) {\n    $('#main-content').ScrollTo();\n    lazyLoadImages('.js-grid-img');\n  }\n\n  // OVERLAY GALLERY\n  $('.js-load-gallery').on('click', function() {\n    var target = '#overlay-gallery-' + $(this).data('gallery');\n    var insert = $(target).find('.js-slick-item');\n\n    insert.clone().appendTo('#gallery-overlay-insert');\n\n    lazyLoadImages('#gallery-overlay-insert .slider-img');\n\n    galleryOverlay.show();\n    html.addClass('overlay-active');\n\n    Slick.init();\n\n    $('#main-content').ScrollTo();\n  });\n\n  $('#gallery-overlay-close').on('click', function() {\n    galleryOverlay.hide();\n    html.removeClass('overlay-active');\n    $('.js-slick-container').slick('unslick').html('');\n  });\n\n  // OVERLAY VIDEO\n  $('.js-load-vimeo').on('click', function() {\n    var $this = $(this);\n    var vimeo = $this.data();\n    var insert = '<iframe id=\"overlay-video-player\" src=\"//player.vimeo.com/video/' + vimeo.vimeo + '?portrait=0&badge=0&byline=0&title=0&autoplay=1\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';\n\n    $('#video-overlay-insert').html(insert);\n    $('#video-overlay-title').html(vimeo.title);\n\n    videoOverlay.show();\n    html.addClass('overlay-active');\n\n    $('#main-content').ScrollTo();\n  });\n\n  $('#video-overlay-close').on('click', function() {\n    videoOverlay.hide();\n    html.removeClass('overlay-active');\n    $('#video-overlay-insert').html('');\n  });\n\n  // STICKY HEADER & SCROLLTO\n  var $projectHeader = $('#project-header');\n  var $toMenu = $('#scroll-to-menu');\n\n  if ($projectHeader.length) {\n    var projectHeaderOffset = $projectHeader.offset();\n    var projectHeaderTop = projectHeaderOffset.top;\n    var projectHeaderHeight = $projectHeader.outerHeight();\n\n    $('article.project').prepend('<div class=\"js-header-spacer u-hidden\"></div>');\n    var $headerSpacer = $('.js-header-spacer');\n    $headerSpacer.css('height', projectHeaderHeight);\n\n    $(window).on('scroll', function() {\n\n      var scrollTop = $(window).scrollTop();\n\n      if ($projectHeader.hasClass('u-fixed')) {\n        if (scrollTop <= projectHeaderTop) {\n          $projectHeader.removeClass('u-fixed');\n          $headerSpacer.addClass('u-hidden');\n          $toMenu.addClass('u-hidden');\n        }\n      } else {\n        if (scrollTop >= projectHeaderTop) {\n          $projectHeader.addClass('u-fixed');\n          $headerSpacer.removeClass('u-hidden');\n          $toMenu.removeClass('u-hidden');\n        }\n      }\n\n    });\n\n  } else {\n\n    var showToMenu = 100;\n\n    $(window).on('scroll', function() {\n      var scrollTop = $(window).scrollTop();\n      if ($toMenu.hasClass('u-hidden')) {\n        if (scrollTop >= showToMenu) {\n          $toMenu.removeClass('u-hidden');\n        }\n      } else {\n        if (scrollTop <= showToMenu) {\n          $toMenu.addClass('u-hidden');\n        }\n      }\n    });\n\n  }\n\n  // OTHER\n\n  $('.js-project-copy-link').on('click', function() {\n    var target = '#' + $(this).data('target-id');\n    $(target).ScrollTo();\n  });\n\n\n// PACKERY\n  if ( $('.js-packery-container').length ) {\n    $('.js-packery-container').imagesLoaded( function() {\n      $('.js-packery-container').packery({\n        itemSelector: '.js-packery-item',\n        transitionDuration: '0s',\n        percentPosition: true,\n        isOriginTop: false\n      }).css({\n        'opacity': 1\n      });\n    });\n  }\n\n\n\n  $(window).on('resize', function() {\n    Slick.resizeImages();\n  });\n\n});\n"],"sourceRoot":"/source/"}