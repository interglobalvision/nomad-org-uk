{"version":3,"sources":["main.js"],"names":["l","data","console","log","lazyLoadImages","selector","smallRetina","largeImageThreshold","$","each","$this","this","retina","windowWidth","largerImageThreshold","attr","largest","basic","large","largestImageThreshold","larger","imagesLoaded","images","img","className","length","packery","singleLayout","css","padding-top","margin","height","windowHeight","captionHeight","Modernizr","highresdisplay","slideMargin","basicAnimationSpeed","html","mainContent","window","outerHeight","width","footerHeight","headerHeight","footerOffset","galleryOverlay","videoOverlay","slickItemWidth","slickItemPadding","videoWidth","videoHeight","videoPadding","videoAreaHeight","videoAreaWidth","resize","hasClass","Slick","init","_this","on","event","slick","replaceCaptions","resizeImages","afterChange","currentSlide","nextSlide","prevArrow","nextArrow","caption","undefined","title","max-height","max-width","jQuery","document","ready","ScrollTo","$copy","parent","find","slideUp","slideDown","load","is","play","mouseenter","mouseleave","pause","currentTime","target","insert","clone","appendTo","show","addClass","hide","removeClass","resizeVideo","parseInt","vimeo","$projectHeader","$toMenu","projectHeaderOffset","offset","projectHeaderTop","top","projectHeaderHeight","prepend","$headerSpacer","scrollTop","showToMenu","itemSelector","transitionDuration","percentPosition","isOriginTop","bind","e","resizeTimeout","clearTimeout","setTimeout"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Modernizr */\n\nfunction l(data) {\n  'use strict';\n  console.log(data);\n}\n\n// VARS\n\nvar retina = Modernizr.highresdisplay,\n  largeImageThreshold = 1100,\n  largerImageThreshold = 1600,\n  largestImageThreshold = 2000,\n\n  margin = 35,\n  slideMargin = 80,\n\n  basicAnimationSpeed = 700,\n\n  html = $('html'),\n  mainContent = $('#main-content'),\n\n  windowHeight = $(window).outerHeight(),\n  windowWidth = $(window).width(),\n\n  captionHeight = $('#single-slider-text').outerHeight(),\n  footerHeight = $('#footer').outerHeight(true),\n  headerHeight = $('#header').outerHeight(true),\n  footerOffset = footerHeight + headerHeight + margin,\n\n  galleryOverlay = $('#gallery-overlay'),\n  videoOverlay = $('#video-overlay'),\n\n  slickItemWidth,\n  slickItemPadding,\n\n  videoWidth,\n  videoHeight,\n  videoPadding,\n  videoAreaHeight,\n  videoAreaWidth;\n\n// FUNCTIONS\n\n  // LAZY IMAGES\n\nfunction lazyLoadImages(selector) {\n  var smallRetina = (largeImageThreshold / 2)\n\n  $(selector).each(function() {\n    var $this = $(this);\n    var data = $this.data();\n\n    if (retina) {\n      if (windowWidth > largerImageThreshold) {\n        $this.attr('src', data.largest);\n      } if (windowWidth < smallRetina) {\n        $this.attr('src', data.basic);\n      } else {\n        $this.attr('src', data.large);\n      }\n\n    } else if (windowWidth > largestImageThreshold) {\n      $this.attr('src', data.largest);\n    } else if (windowWidth > largerImageThreshold) {\n      $this.attr('src', data.larger);\n    } else if (windowWidth > largeImageThreshold) {\n      $this.attr('src', data.large);\n    } else {\n      $this.attr('src', data.basic);\n    }\n\n    $this.imagesLoaded(function() {\n      this.images[0].img.className += ' img-loaded';\n\n      if ( $('.js-packery-container').length ) {\n        $('.js-packery-container').packery();\n      }\n    });\n\n  });\n}\n\n  // LAYOUT\n\n$(window).resize(function() {\n  windowHeight = $(window).outerHeight();\n  windowWidth = $(window).width();\n});\n\nfunction singleLayout() {\n  $('#single-slider').css({\n    'padding-top': margin,\n    'height': (windowHeight - captionHeight)\n  });\n}\n\nif ($('body').hasClass('single')) {\n  singleLayout();\n}\n\n  // SLICK\n\nvar Slick = {\n  init: function() {\n    var _this = this;\n    $('.js-slick-container').on({\n      init: function(event, slick){\n        //var currentSlideIndex = $('.slick-active').attr('data-slick-index');\n        // set caption\n        _this.replaceCaptions(0);\n\n        // set length for n of * in captions\n        //$('#slick-length').html($('.js-slick-item').length-2);\n\n        // fix images for window height\n        _this.resizeImages();\n\n        // fade in when ready\n        $('#single-slider').css( 'opacity' , 1 );\n        //$('#single-slider-text').css( 'opacity' , 1 );\n      },\n      afterChange: function(event, slick, currentSlide, nextSlide){\n        // set caption\n        _this.replaceCaptions(currentSlide);\n\n        // set active index in human readable form\n        //$('#slick-current-index').html(currentSlide+1);\n      }\n    }).slick({\n      prevArrow: $('#gallery-overlay-previous'),\n      nextArrow: $('#gallery-overlay-next'),\n    });\n\n    $('.js-slick-item').on('click', function() {\n      $('.js-slick-container').slick('slickNext');\n    });\n  },\n\n  replaceCaptions: function(currentSlide) {\n    var data = $('[data-slick-index=\"' + currentSlide + '\"]').data();\n    var caption;\n    if (data.caption !== undefined || data.caption !== null) {\n      caption = data.caption;\n    }\n    var title = data.title;\n\n    if (! caption || caption === undefined || caption === null) {\n      $('#gallery-overlay-caption').html(' ');\n    } else {\n      $('#gallery-overlay-caption').html(', ' + caption);\n    }\n\n    if (! title || title === undefined || title === null) {\n      $('#gallery-overlay-title').html(' ');\n    } else {\n      $('#gallery-overlay-title').html(title);\n    }\n\n  },\n\n  resizeImages: function() {\n    slickItemWidth = $('#gallery-overlay .js-slick-item:first-of-type').width();\n    slickItemPadding = $('#gallery-overlay .js-slick-item:first-of-type').css('padding');\n    $('.js-slick-item img').css({\n      'max-height' : ( windowHeight - captionHeight - ( slideMargin * 2 ) ),\n      'max-width' : ( slickItemWidth - ( slickItemPadding * 2 ) ),\n    });\n  },\n};\n\n\njQuery(document).ready(function () {\n  'use strict';\n\n// MENU\n\n  $('#scroll-to-menu').on('click', function() {\n    $('html').ScrollTo();\n  });\n\n// FOOTER\n\n  mainContent.css('min-height', (windowHeight - footerOffset));\n  $('#footer').css('opacity', 1);\n  $(window).resize(function() {\n    mainContent.css('min-height', (windowHeight - footerOffset));\n  });\n\n\n// INDEX\n\n  $('.js-post-toggle').on('click', function() {\n    var $this = $(this);\n    var $copy = $this.parent().find('.post-copy');\n\n    if ($this.data('open') === true) {\n      $copy.slideUp(basicAnimationSpeed);\n      $this.data('open', false);\n    } else {\n      $copy.slideDown(basicAnimationSpeed);\n      $this.data('open', true);\n    }\n  });\n\n  // VIDEO HOVERS\n\n  $('.project-video').each( function() {\n    this.load();\n  });\n\n  $('.project-video').on('durationchange', function() {\n    if( $(this).is(\":hover\") ) {\n      this.play();\n    }\n    $(this).on({\n      'mouseenter': function() {\n        this.play();\n      },\n      'mouseleave': function() {\n        this.pause();\n        this.currentTime = 0;\n      },\n    });\n  });\n\n// SINGLE PROJECT\n\n  if ($('body').hasClass('single-project')) {\n    mainContent.ScrollTo();\n    lazyLoadImages('.js-grid-img');\n  }\n\n  // OVERLAY GALLERY\n  $('.js-load-gallery').on('click', function() {\n    var target = '#overlay-gallery-' + $(this).data('gallery');\n    var insert = $(target).find('.js-slick-item');\n\n    insert.clone().appendTo('#gallery-overlay-insert');\n\n    lazyLoadImages('#gallery-overlay-insert .slider-img');\n\n    galleryOverlay.show();\n    html.addClass('overlay-active');\n\n    Slick.init();\n\n    mainContent.ScrollTo();\n  });\n\n  $('#gallery-overlay-close').on('click', function() {\n    galleryOverlay.hide();\n    html.removeClass('overlay-active');\n    $('.js-slick-container').slick('unslick').html('');\n  });\n\n  // OVERLAY VIDEO\n\n  var resizeVideo = function() {\n    videoPadding = parseInt($('.js-video-holder').css('padding-top'));\n    videoAreaHeight = ( windowHeight - ( videoPadding * 2 ) );\n    videoAreaWidth = ( windowWidth - ( videoPadding * 2 ) );\n\n    videoHeight = videoAreaWidth * 0.5625;\n    videoWidth = videoAreaHeight * 1.7777;\n\n    if (videoHeight > videoAreaHeight) {\n      videoHeight = videoAreaHeight;\n      videoWidth = videoAreaHeight * 1.7777;\n    }\n\n    if (videoWidth > videoAreaWidth) {\n      videoWidth = videoAreaWidth;\n      videoHeight = videoAreaWidth * 0.5625;\n    }\n\n    $('#overlay-video-player').css({\n      'height': videoHeight,\n      'width': videoWidth,\n    });\n  };\n\n  $('.js-load-vimeo').on('click', function() {\n    var $this = $(this);\n    var vimeo = $this.data();\n    var insert = '<iframe id=\"overlay-video-player\" src=\"//player.vimeo.com/video/' + vimeo.vimeo + '?portrait=0&badge=0&byline=0&title=0&autoplay=1\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';\n\n    $('#video-overlay-insert').html(insert);\n    $('#video-overlay-title').html(vimeo.title);\n\n    videoOverlay.show();\n    html.addClass('overlay-active');\n\n    resizeVideo();\n\n    mainContent.ScrollTo();\n  });\n\n  $('#video-overlay-close').on('click', function() {\n    videoOverlay.hide();\n    html.removeClass('overlay-active');\n    $('#video-overlay-insert').html('');\n  });\n\n  // STICKY HEADER & SCROLLTO\n  var $projectHeader = $('#project-header');\n  var $toMenu = $('#scroll-to-menu');\n\n  if ($projectHeader.length) {\n    var projectHeaderOffset = $projectHeader.offset();\n    var projectHeaderTop = projectHeaderOffset.top;\n    var projectHeaderHeight = $projectHeader.outerHeight();\n\n    $('article.project').prepend('<div class=\"js-header-spacer u-hidden\"></div>');\n    var $headerSpacer = $('.js-header-spacer');\n    $headerSpacer.css('height', projectHeaderHeight);\n\n    $(window).on('scroll', function() {\n\n      var scrollTop = $(window).scrollTop();\n\n      if ($projectHeader.hasClass('u-fixed')) {\n        if (scrollTop <= projectHeaderTop) {\n          $projectHeader.removeClass('u-fixed');\n          $headerSpacer.addClass('u-hidden');\n          $toMenu.addClass('u-hidden');\n        }\n      } else {\n        if (scrollTop >= projectHeaderTop) {\n          $projectHeader.addClass('u-fixed');\n          $headerSpacer.removeClass('u-hidden');\n          $toMenu.removeClass('u-hidden');\n        }\n      }\n\n    });\n\n  } else {\n\n    var showToMenu = 100;\n\n    $(window).on('scroll', function() {\n      var scrollTop = $(window).scrollTop();\n      if ($toMenu.hasClass('u-hidden')) {\n        if (scrollTop >= showToMenu) {\n          $toMenu.removeClass('u-hidden');\n        }\n      } else {\n        if (scrollTop <= showToMenu) {\n          $toMenu.addClass('u-hidden');\n        }\n      }\n    });\n\n  }\n\n  // OTHER\n\n  $('.js-project-copy-link').on('click', function() {\n    var target = '#' + $(this).data('target-id');\n    $(target).ScrollTo();\n  });\n\n\n// PACKERY\n\n  if ( $('.js-packery-container').length ) {\n    $('.js-packery-container').packery({\n        itemSelector: '.js-packery-item',\n        transitionDuration: '0s',\n        percentPosition: true,\n        isOriginTop: false\n    });\n  }\n\n  $(window).bind('resize', function(e) {\n    var resizeTimeout;\n    $(window).resize(function() {\n      clearTimeout(resizeTimeout);\n      resizeTimeout = setTimeout(function() {\n        Slick.resizeImages();\n        resizeVideo();\n      }, 250);\n    });\n  });\n\n});"],"sourceRoot":"/source/"}